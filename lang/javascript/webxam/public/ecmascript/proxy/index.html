<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <title>Proxy</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../../common.css" />
    <link rel="stylesheet" href="exam.css" />
</head>

<body>
    <header>
        <a href="../../">home</a>
        <h1>Proxy</h1>
    </header>
    <main>
        <section class="example">
            <h2>hasによる要素チェック</h2>
            <button data-event-target="createArray">create</button>
            <label>base<input type="number" class="base" value="1" min="1" max="20" /></label>
            <label>test value<input type="number" data-event-target="testValue" value="1" min="1" max="100"></label>
            <div class="output"></div>
        </section>
        <section class=example>
            <h2>constructによるインスタンス生成調査</h2>
            <div class="container">
                <label><input type="radio" data-event-target="checkConstruction" name="creationType" value="reflect"
                        checked />Reflect.construct</label>
                <label><input type="radio" data-event-target="checkConstruction" name="creationType"
                        value="object" />Object.create</label>
                <label><input type="radio" data-event-target="checkConstruction" name="creationType"
                        value="normal" />Normal</label>
            </div>
            <div class=output></div>
        </section>
        <section class="example">
            <h2>ownKeysによるプロパティ列挙と拡張</h2>
            <p>
                Proxy.ownKeysによって拡張されたプロパティも取得したい場合は
                Object.keysではなくObject.getOwnPropertyNamesを使用する。
            </p>
            <div class="container">
                <label>追加プロパティ名<input class="extends-property" type="text" value="favorites,score" /></label>
                <button data-event-target="trapKeys">run</button>
            </div>
            <div class="output"></div>
        </section>
        <section class="example">
            <h2>Revocable Proxy</h2>
            <div class="container">
                <button data-event-target="runRevocableProxy" data-create-proxy>run</button>
                <button data-event-target="runRevocableProxy" data-revoke-proxy>revoke</button>
            </div>
            <div class="output"></div>
        </section>
    </main>
    <footer>
        <p>参考</p>
        <ul>
            <li><a
                    href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy">Proxy(MDN)</a>
            </li>
            <li><a href="https://www.oreilly.co.jp/books/9784873118734/">Node.jsデザインパターン 第2版</a></li>
            <li><a href="http://www.zsoltnagy.eu/es6-proxies-in-practice/">ES6 Proxies in Practice</a></li>
        </ul>
    </footer>
    <script type="module" src="exam.js"></script>
</body>

</html>