<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://xmlns.jcp.org/jsf/html">
    <h:head>
		<meta charset="UTF-8" />
        <title>静的リンクと動的リンクでリダイレクト</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<h:outputStylesheet library="style" name="common.css" />
		<style>
			body {
				color: #{colorPreferences.foreGround};
				background-color: #{colorPreferences.backGround};
			}
		</style>
    </h:head>
    <h:body>
		<header>
			<h1>静的リンクと動的リンクでリダイレクト</h1>
			<p><h:link outcome="/index" value="home" /></p>
		</header>

		<main>
			<p>
				リダイレクトを行うBeanはセッションスコープで保持される必要がある。<br />
				リダイレクトはリクエストが複数発生するからである。
			</p>
			<section>
				<h2>静的リンク</h2>
				<h:form prependId="false">
					<p>
						<span class="emphasis">*</span><span>ユーザーID:</span>
						<h:inputText id="customerId1"
									 value="#{bankForm3.customerId}"
									 required="true"
									 requiredMessage="ユーザーIDは必須です！" />
						<h:message for="customerId1" styleClass="error" />
					</p>
					<p>
						<span>好みの色:</span>
						<h:inputText value="#{colorPreferences.foreGround}" />
					</p>
					<p>
						<span>好みの背景色:</span>
						<h:inputText value="#{colorPreferences.backGround}" />
					</p>
					<div>
						<h:commandButton value="実行" action="#{bankForm3.findBalance}" />
					</div>
				</h:form>
			</section>
			<section>
				<h2>動的リンク</h2>
				<h:form prependId="false">
					<p>
						<span class="emphasis">*</span><span>ユーザーID:</span>
						<h:inputText id="customerId2"
									 value="#{bankForm4.customerId}"
									 required="true"
									 requiredMessage="ユーザーIDは必須です！" />
						<h:message for="customerId2" styleClass="error" />
					</p>
					<p>
						<span>好みの色:</span>
						<h:inputText value="#{colorPreferences.foreGround}" />
					</p>
					<p>
						<span>好みの背景色:</span>
						<h:inputText value="#{colorPreferences.backGround}" />
					</p>
					<div>
						<h:commandButton value="実行" action="#{bankForm4.findBalance}" />
					</div>
					<section>
						<h3>ブックマーク可能なリンク</h3>
						<p>
							TODO:リンクをクリックした時にbankForm4のsetCustomerIdが呼び出されないので<br />
							リンク先に正しいユーザー情報が表示されない。
						</p>
						<ul>
							<li><h:link outcome="show-dynamic-link-result?id=id001" value="うさお" /></li>
							<li><h:link outcome="show-dynamic-link-result?id=id002" value="モグ" /></li>
							<li><h:link outcome="show-dynamic-link-result?id=id003" value="プスタ" /></li>
						</ul>
					</section>
				</h:form>
			</section>
		</main>
    </h:body>
</html>
